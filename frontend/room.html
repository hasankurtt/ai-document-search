<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sohbet Odası - AI Document Search</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="container">
            <div class="navbar-content">
                <!-- Logo -->
                <a href="dashboard.html" class="logo">
                    <div class="logo-icon">✨</div>
                    <div class="logo-text">
                        <h1>AI Document Search</h1>
                        <p>Powered by GPT-4 & Pinecone</p>
                    </div>
                </a>

                <!-- Menu -->
                <div class="nav-menu">
                    <a href="dashboard.html" class="nav-link">
                        <span>📊</span>
                        <span>Dashboard</span>
                    </a>
                    <a href="profile.html" class="nav-link">
                        <span>👤</span>
                        <span id="userName">Kullanıcı</span>
                    </a>
                    <button class="btn-logout" id="logoutBtn">
                        <span>🚪</span>
                        <span>Çıkış Yap</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="chat-room">
        <div class="container-fluid">
            <div class="room-layout">
                <!-- Sidebar -->
                <aside class="room-sidebar">
                    <!-- Room Info -->
                    <div class="room-info-card">
                        <div class="room-emoji" id="roomEmoji">📚</div>
                        <h3 id="roomName">Oda Adı</h3>
                        <p id="roomDescription">Açıklama</p>
                        <div class="room-stats">
                            <div class="room-stat">
                                <span class="stat-icon">📄</span>
                                <span id="docCount">0</span>
                            </div>
                            <div class="room-stat">
                                <span class="stat-icon">💬</span>
                                <span id="chatCount">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Documents Tab -->
                    <div class="sidebar-section">
                        <div class="section-header">
                            <h4>📄 Dokümanlar</h4>
                            <button class="btn-icon" id="uploadDocBtn" title="Doküman Yükle">
                                <span>➕</span>
                            </button>
                        </div>
                        
                        <!-- Drag & Drop Area -->
                        <div class="drag-drop-area" id="dragDropArea">
                            <input 
                                type="file" 
                                id="fileInputSidebar" 
                                accept=".pdf,.doc,.docx,.txt" 
                                multiple 
                                style="display: none;"
                            >
                            <div class="drag-drop-content">
                                <div class="drag-icon">📤</div>
                                <p>Dosyaları buraya sürükleyin</p>
                                <small>veya</small>
                                <button type="button" class="btn-upload-small" onclick="document.getElementById('fileInputSidebar').click()">
                                    Dosya Seç
                                </button>
                            </div>
                        </div>
                        
                        <div class="documents-list" id="documentsList">
                            <!-- Documents will be loaded here -->
                        </div>
                    </div>

                    <!-- Room Settings -->
                    <div class="sidebar-actions">
                        <button class="btn-secondary btn-small" id="roomSettingsBtn">
                            <span>⚙️</span>
                            <span>Oda Ayarları</span>
                        </button>
                        <button class="btn-danger btn-small" id="deleteRoomBtn">
                            <span>🗑️</span>
                            <span>Odayı Sil</span>
                        </button>
                    </div>
                </aside>

                <!-- Chat Area -->
                <div class="chat-area">
                    <!-- Chat Messages -->
                    <div class="chat-messages" id="chatMessages">
                        <!-- Welcome Message -->
                        <div class="welcome-message">
                            <div class="welcome-icon">👋</div>
                            <h3>Hoş Geldiniz!</h3>
                            <p>Bu odaya özel dokümanlar yükleyin ve sorularınızı sorun. AI sizin için dokümanlarınızı analiz edecek ve cevaplar bulacak.</p>
                        </div>
                    </div>

                    <!-- Chat Input -->
                    <div class="chat-input-container">
                        <form id="chatForm" class="chat-input-form">
                            <textarea 
                                id="chatInput" 
                                class="chat-input" 
                                placeholder="Bu odadaki dokümanlar hakkında bir şeyler sorun..."
                                rows="1"
                            ></textarea>
                            <button type="submit" class="btn-send" id="sendBtn">
                                <span>🚀</span>
                            </button>
                        </form>
                        <div class="input-hint">
                            <span>💡</span>
                            <span>Dokümanlarınız analiz edilerek size en doğru cevaplar verilecek</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Room Settings Modal -->
    <div id="roomSettingsModal" class="modal hidden">
        <div class="modal-overlay" onclick="closeRoomSettingsModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Oda Ayarları</h3>
                <button class="modal-close" onclick="closeRoomSettingsModal()">✕</button>
            </div>
            <form id="roomSettingsForm" class="modal-form">
                <div class="form-group">
                    <label for="editRoomName">Oda Adı</label>
                    <input 
                        type="text" 
                        id="editRoomName" 
                        class="form-input"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="editRoomDescription">Açıklama</label>
                    <textarea 
                        id="editRoomDescription" 
                        class="form-textarea" 
                        rows="3"
                    ></textarea>
                </div>

                <div class="form-group">
                    <label>Emoji</label>
                    <div class="emoji-selector">
                        <div class="selected-emoji-display" onclick="toggleEmojiPickerSettings()">
                            <div class="selected-emoji" id="selectedEmojiDisplaySettings">📚</div>
                            <span>Değiştir</span>
                        </div>
                        
                        <div class="emoji-picker-container hidden" id="emojiPickerContainerSettings">
                            <div class="emoji-search-bar">
                                <input 
                                    type="text" 
                                    id="emojiSearchSettings" 
                                    class="emoji-search-input" 
                                    placeholder="🔍 Emoji ara..."
                                >
                            </div>
                            <div class="emoji-categories-tabs">
                                <button type="button" class="emoji-tab-settings active" data-category="all">Tümü</button>
                                <button type="button" class="emoji-tab-settings" data-category="education">📚</button>
                                <button type="button" class="emoji-tab-settings" data-category="work">💼</button>
                                <button type="button" class="emoji-tab-settings" data-category="science">🔬</button>
                                <button type="button" class="emoji-tab-settings" data-category="creative">🎨</button>
                                <button type="button" class="emoji-tab-settings" data-category="health">🏥</button>
                                <button type="button" class="emoji-tab-settings" data-category="other">⭐</button>
                            </div>
                            <div class="emoji-grid" id="emojiGridSettings">
                                <!-- Emojis will be loaded here -->
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="editRoomEmoji" value="📚">
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeRoomSettingsModal()">
                        İptal
                    </button>
                    <button type="submit" class="btn-primary">
                        <span>💾</span>
                        <span>Kaydet</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/room.js"></script>
</body>
</html>
