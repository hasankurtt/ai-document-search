<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sohbet OdasÄ± - AI Document Search</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="container">
            <div class="navbar-content">
                <!-- Logo -->
                <a href="dashboard.html" class="logo">
                    <div class="logo-icon">âœ¨</div>
                    <div class="logo-text">
                        <h1>AI Document Search</h1>
                        <p>Powered by GPT-4 & Pinecone</p>
                    </div>
                </a>

                <!-- Mobile Sidebar Toggle -->
                <button class="btn-sidebar-toggle" id="sidebarToggle" onclick="document.querySelector('.room-sidebar').classList.toggle('open')">
                    <span>â˜°</span>
                </button>

                <!-- Menu -->
                <div class="nav-menu">
                    <a href="dashboard.html" class="nav-link">
                        <span>ğŸ“Š</span>
                        <span>Dashboard</span>
                    </a>
                    <a href="profile.html" class="nav-link">
                        <span>ğŸ‘¤</span>
                        <span id="userName">KullanÄ±cÄ±</span>
                    </a>
                    <button class="btn-logout" id="logoutBtn">
                        <span>ğŸšª</span>
                        <span>Ã‡Ä±kÄ±ÅŸ Yap</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="chat-room">
        <div class="container-fluid">
            <div class="room-layout">
                <!-- Sidebar -->
                <aside class="room-sidebar">
                    <!-- Room Info -->
                    <div class="room-info-card">
                        <div class="room-emoji" id="roomEmoji">ğŸ“š</div>
                        <h3 id="roomName">Oda AdÄ±</h3>
                        <p id="roomDescription">AÃ§Ä±klama</p>
                        <div class="room-stats">
                            <div class="room-stat">
                                <span class="stat-icon">ğŸ“„</span>
                                <span id="docCount">0</span>
                            </div>
                            <div class="room-stat">
                                <span class="stat-icon">ğŸ’¬</span>
                                <span id="chatCount">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Documents Tab -->
                    <div class="sidebar-section">
                        <div class="section-header">
                            <h4>ğŸ“„ DokÃ¼manlar</h4>
                            <button class="btn-icon" id="uploadDocBtn" title="DokÃ¼man YÃ¼kle">
                                <span>â•</span>
                            </button>
                        </div>
                        
                        <!-- Drag & Drop Area -->
                        <div class="drag-drop-area" id="dragDropArea">
                            <input 
                                type="file" 
                                id="fileInputSidebar" 
                                accept=".pdf,.doc,.docx,.txt" 
                                multiple 
                                style="display: none;"
                            >
                            <div class="drag-drop-content">
                                <div class="drag-icon">ğŸ“¤</div>
                                <p>DosyalarÄ± buraya sÃ¼rÃ¼kleyin</p>
                                <small>veya</small>
                                <button type="button" class="btn-upload-small" onclick="document.getElementById('fileInputSidebar').click()">
                                    Dosya SeÃ§
                                </button>
                            </div>
                        </div>
                        
                        <div class="documents-list" id="documentsList">
                            <!-- Documents will be loaded here -->
                        </div>
                    </div>

                    <!-- Room Settings -->
                    <div class="sidebar-actions">
                        <button class="btn-secondary btn-small" id="roomSettingsBtn">
                            <span>âš™ï¸</span>
                            <span>Oda AyarlarÄ±</span>
                        </button>
                        <button class="btn-danger btn-small" id="deleteRoomBtn">
                            <span>ğŸ—‘ï¸</span>
                            <span>OdayÄ± Sil</span>
                        </button>
                    </div>
                </aside>

                <!-- Chat Area -->
                <div class="chat-area" style="display: flex; flex-direction: column; height: calc(100vh - 120px);">
                    <!-- Chat Messages -->
                    <div class="chat-messages" id="chatMessages" style="flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column;">
                        <!-- Welcome Message -->
                        <div class="welcome-message">
                            <div class="welcome-icon">ğŸ‘‹</div>
                            <h3>HoÅŸ Geldiniz!</h3>
                            <p>Bu odaya Ã¶zel dokÃ¼manlar yÃ¼kleyin ve sorularÄ±nÄ±zÄ± sorun. AI sizin iÃ§in dokÃ¼manlarÄ±nÄ±zÄ± analiz edecek ve cevaplar bulacak.</p>
                        </div>
                    </div>

                    <!-- Chat Input -->
                    <div class="chat-input-container" style="flex-shrink: 0;">
                        <form id="chatForm" class="chat-input-form">
                            <textarea 
                                id="chatInput" 
                                class="chat-input" 
                                placeholder="Bu odadaki dokÃ¼manlar hakkÄ±nda bir ÅŸeyler sorun..."
                                rows="1"
                            ></textarea>
                            <button type="submit" class="btn-send" id="sendBtn">
                                <span>ğŸš€</span>
                            </button>
                        </form>
                        <div class="input-hint">
                            <span>ğŸ’¡</span>
                            <span>DokÃ¼manlarÄ±nÄ±z analiz edilerek size en doÄŸru cevaplar verilecek</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Room Settings Modal -->
    <div id="roomSettingsModal" class="modal hidden">
        <div class="modal-overlay" onclick="closeRoomSettingsModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Oda AyarlarÄ±</h3>
                <button class="modal-close" onclick="closeRoomSettingsModal()">âœ•</button>
            </div>
            <form id="roomSettingsForm" class="modal-form">
                <div class="form-group">
                    <label for="editRoomName">Oda AdÄ±</label>
                    <input 
                        type="text" 
                        id="editRoomName" 
                        class="form-input"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="editRoomDescription">AÃ§Ä±klama</label>
                    <textarea 
                        id="editRoomDescription" 
                        class="form-textarea" 
                        rows="3"
                    ></textarea>
                </div>

                <div class="form-group">
                    <label>Emoji</label>
                    <div class="emoji-selector">
                        <div class="selected-emoji-display" onclick="toggleEditEmojiPicker()">
                            <div class="selected-emoji" id="selectedEditEmojiDisplay">ğŸ“š</div>
                            <span>DeÄŸiÅŸtir</span>
                        </div>
                        
                        <div class="emoji-picker-container hidden" id="editEmojiPickerContainer">
                            <div class="emoji-search-bar">
                                <input 
                                    type="text" 
                                    id="emojiSearchSettings" 
                                    class="emoji-search-input" 
                                    placeholder="ğŸ” Emoji ara..."
                                >
                            </div>
                            <div class="emoji-categories-tabs">
                                <button type="button" class="emoji-tab-settings active" data-category="all">TÃ¼mÃ¼</button>
                                <button type="button" class="emoji-tab-settings" data-category="education">ğŸ“š</button>
                                <button type="button" class="emoji-tab-settings" data-category="work">ğŸ’¼</button>
                                <button type="button" class="emoji-tab-settings" data-category="science">ğŸ”¬</button>
                                <button type="button" class="emoji-tab-settings" data-category="creative">ğŸ¨</button>
                                <button type="button" class="emoji-tab-settings" data-category="health">ğŸ¥</button>
                                <button type="button" class="emoji-tab-settings" data-category="other">â­</button>
                            </div>
                            <div class="emoji-grid" id="editEmojiGrid">
                                <!-- Emojis will be loaded here -->
                            </div>
                        </div>
                    </div>
                    <input 
                        type="hidden" 
                        id="editRoomEmoji"
                        value="ğŸ“š"
                    >
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeRoomSettingsModal()">
                        Ä°ptal
                    </button>
                    <button type="submit" class="btn-primary">
                        <span>ğŸ’¾</span>
                        <span>Kaydet</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/room.js"></script>
</body>
</html>